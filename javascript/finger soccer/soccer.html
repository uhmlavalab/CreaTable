<!-- FINGER SOCCER -- by Jason Leigh><!-->
<head>

<style>
body {
  background: #fafafa;
  text-align: center;
}

canvas {

  max-width: 100%;
  max-height: 100%;

}

canvas:active {
  cursor: pointer;
  cursor: -webkit-grabbing;
}
</style>

<script type='text/javascript' src='matter-0.8.0.js'></script>
<meta charset='utf-8'>


</head>

<body>

 <script type='text/javascript'>

 //var screenWidth = 3840;
// var screenHeight = 2160;
 var screenWidth = 1920;
var screenHeight = 1080;

// Matter.js module aliases
var Engine = Matter.Engine,
    World = Matter.World,
    Bodies = Matter.Bodies,
    Body = Matter.Body,
    Composites = Matter.Composites,
    Common = Matter.Common,
    Constraint = Matter.Constraint,
    MouseConstraint = Matter.MouseConstraint,
    Events = Matter.Events;

// create a Matter.js engine

var engine = Engine.create(document.body, {
  render: {
    options: {
     // width: screenWidth,
      //height: screenHeight,
      wireframes: false,
      background: 'background-4k.png'
    }
  }
});


engine.world.bounds.max.x = screenWidth;
engine.world.bounds.max.y = screenHeight;

engine.render.canvas.width = engine.render.options.width = screenWidth;
engine.render.canvas.height = engine.render.options.height = screenHeight;
engine.render.options.hasBounds = false;

// create two boxes and a ground
// var boxA = Bodies.circle(420, 100, 150, {
//             density: 0.0005,
//       frictionAir: 0.0,
//       restitution: 0.3,
//       friction: 0.0,
//   render: {
//
//         sprite: {
//
//           texture: 'soccer.png'
//         }
//       }});
var boxB = Bodies.rectangle(screenWidth/2, screenHeight/2, 200, 200);

var boxC = Bodies.polygon(screenWidth/2, screenHeight/2, 9, 200);



// some settings
var offset = 10,
    wallOptions = {
      isStatic: true,
      render: {
        visible: true
      }
    };

//more options!
var offset2 = 10,
  wallOptions2 = {
    isStatic: false,
    render: {
      visible: true
    }
  };


var ground = Bodies.rectangle(screenWidth/2, screenHeight-25, screenWidth, 25,  wallOptions);


// add some invisible some walls to the world
World.add(engine.world, [
  //top
  Bodies.rectangle(screenWidth/2, 25/2, screenWidth, 25, wallOptions),
  //left
  Bodies.rectangle(0, screenHeight/2+25, 25, screenHeight,  wallOptions),
  //right
  Bodies.rectangle(screenWidth, screenHeight/2+25, 25, screenHeight,  wallOptions),
  ground,

]);

// add all of the bodies to the world
//World.add(engine.world, [boxA, ground]);
//World.add(engine.world, [ground]);

//World.add(engine.world, [boxC]);

//add a mouse-controlled constraint
var mouseConstraint = MouseConstraint.create(engine);
World.add(engine.world, mouseConstraint);

// gravity init
engine.world.gravity.x = 0;
engine.world.gravity.y = 1;

var bridge = Composites.stack(150, 500,25, 1, 10, 10, function(x, y) {
      return Bodies.rectangle(x, y, 30, 10, { collisionFilter: {  } });
  });

  Composites.chain(bridge, 0.5, 0, -0.5, 0, { stiffness: 1.0});

  var balls = Composites.stack(100, 100, 50, 4, 10, 10, function(x, y) {
      return Bodies.circle(x, y, 20);
  });

var ballsBodies = balls.bodies;

var pillers1 = Composites.stack(50, 100, 18, 5, 75, 150, function(x,y){
  return Bodies.circle(x,y, 15, {isStatic: true});
})

var pillers2 = Composites.stack(75, 200, 18, 5, 75, 150, function(x,y){
  return Bodies.circle(x,y, 15, {isStatic: true});
})

  World.add(engine.world, [
      //bridge,
      //Constraint.create({ pointA: { x: 0, y: screenHeight-screenHeight/4 }, bodyB: bridge.bodies[0], pointB: { x: -25, y: 0 } }),
      //Constraint.create({ pointA: { x: screenWidth, y: screenHeight-screenHeight/4 }, bodyB: bridge.bodies[24], pointB: { x: 25, y: 0 } }),
      balls,
      pillers1,
      pillers2,
  ]);




           // an example of using collisionActive event on an engine
           Events.on(engine, 'collisionActive', function(event) {
               var pairs = event.pairs;

               // change object colours to show those starting a collision
               for (var i = 0; i < pairs.length; i++) {
                   var pair = pairs[i];
                   if((ballsBodies.indexOf(pair.bodyB) != -1) && (pair.bodyA.id == ground.id)){
                        Body.translate(pair.bodyB,{x:Math.random(), y:-screenHeight+100});

                   }
                   else if((ballsBodies.indexOf(pair.bodyA) != -1) && (pair.bodyB.id == ground.id)){
                     Body.translate(pair.bodyA,{x:Math.random(), y:-screenHeight+100});
                   }

               }


           })



// run the engine
Engine.run(engine);



</script>

</body>
